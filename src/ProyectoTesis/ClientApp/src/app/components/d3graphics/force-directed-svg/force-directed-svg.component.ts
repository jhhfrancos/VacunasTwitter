import { Component, EventEmitter, Input, OnInit, Output, ViewEncapsulation } from '@angular/core';

import * as d3 from 'd3';

interface Node {
  id: string;
  group: string;
  index: number;
  x: number;
  y: number;
  vx: number;
  xy: number;
  radius: number;
  citing_patents_count: string;
}

interface Link {
  source: string;
  target: string;
  value: number;
}

interface Graph {
  nodes: Node[];
  links: Link[];
}
/*
const data = {
  "nodes": [
      {
          "id": "1070548784076255232",
          "group": "1"
      },
      {
          "id": "993609081343668224",
          "group": "1"
      },
      {
          "id": "1084517874184736768",
          "group": "1"
      },
      {
          "id": "73010193",
          "group": "1"
      },
      {
          "id": "306359551",
          "group": "1"
      },
      {
          "id": "796893205925076992",
          "group": "1"
      },
      {
          "id": "1256820158536077312",
          "group": "1"
      },
      {
          "id": "850011581832474624",
          "group": "1"
      },
      {
          "id": "1210755568031240192",
          "group": "1"
      },
      {
          "id": "3370203149",
          "group": "1"
      },
      {
          "id": "816285077432844288",
          "group": "1"
      },
      {
          "id": "520386868",
          "group": "1"
      },
      {
          "id": "1138476515090468864",
          "group": "1"
      },
      {
          "id": "1190332661765722112",
          "group": "1"
      },
      {
          "id": "988885393104932864",
          "group": "1"
      },
      {
          "id": "223641204",
          "group": "1"
      },
      {
          "id": "568812080",
          "group": "1"
      },
      {
          "id": "971935915517120512",
          "group": "1"
      },
      {
          "id": "208586222",
          "group": "1"
      },
      {
          "id": "943478278299570176",
          "group": "1"
      },
      {
          "id": "33884545",
          "group": "1"
      },
      {
          "id": "229001251",
          "group": "1"
      },
      {
          "id": "1257360895384211456",
          "group": "1"
      },
      {
          "id": "237494612",
          "group": "1"
      },
      {
          "id": "1026181604903985152",
          "group": "1"
      },
      {
          "id": "1179841231070867456",
          "group": "1"
      },
      {
          "id": "1298116917996085248",
          "group": "1"
      },
      {
          "id": "1292768664241012736",
          "group": "1"
      },
      {
          "id": "264529969",
          "group": "1"
      },
      {
          "id": "4352085639",
          "group": "1"
      },
      {
          "id": "87267769",
          "group": "1"
      },
      {
          "id": "144741178",
          "group": "1"
      },
      {
          "id": "158622681",
          "group": "1"
      },
      {
          "id": "2278617572",
          "group": "1"
      },
      {
          "id": "1089157733767675904",
          "group": "1"
      },
      {
          "id": "573189708",
          "group": "1"
      },
      {
          "id": "1230952426473238528",
          "group": "1"
      },
      {
          "id": "1236446217913217024",
          "group": "1"
      },
      {
          "id": "125382672",
          "group": "1"
      },
      {
          "id": "293630074",
          "group": "1"
      },
      {
          "id": "1270862759165493248",
          "group": "1"
      },
      {
          "id": "1260590009939308544",
          "group": "1"
      },
      {
          "id": "333540046",
          "group": "1"
      },
      {
          "id": "828005341791141888",
          "group": "1"
      },
      {
          "id": "152358615",
          "group": "1"
      },
      {
          "id": "1206656672103579648",
          "group": "1"
      },
      {
          "id": "6468102",
          "group": "1"
      },
      {
          "id": "1281618068238675968",
          "group": "1"
      },
      {
          "id": "2225613776",
          "group": "1"
      },
      {
          "id": "780980779",
          "group": "1"
      },
      {
          "id": "293814789",
          "group": "1"
      },
      {
          "id": "369249116",
          "group": "1"
      },
      {
          "id": "2839908580",
          "group": "1"
      },
      {
          "id": "253073339",
          "group": "1"
      },
      {
          "id": "2754005176",
          "group": "1"
      },
      {
          "id": "2472026007",
          "group": "1"
      },
      {
          "id": "1080352563218841600",
          "group": "1"
      },
      {
          "id": "1005103898556760064",
          "group": "1"
      },
      {
          "id": "1297963146007785472",
          "group": "1"
      },
      {
          "id": "274384591",
          "group": "1"
      },
      {
          "id": "1244693460088545280",
          "group": "1"
      },
      {
          "id": "1248730122565320704",
          "group": "1"
      },
      {
          "id": "567652472",
          "group": "1"
      },
      {
          "id": "212591707",
          "group": "1"
      },
      {
          "id": "2360832798",
          "group": "1"
      },
      {
          "id": "720580396832972800",
          "group": "1"
      },
      {
          "id": "1097632215305990144",
          "group": "1"
      },
      {
          "id": "1273012654815301632",
          "group": "1"
      },
      {
          "id": "705944604160487424",
          "group": "1"
      },
      {
          "id": "1301027575259697152",
          "group": "2"
      },
      {
          "id": "1300196285656576000",
          "group": "2"
      },
      {
          "id": "1300131862006898688",
          "group": "2"
      },
      {
          "id": "1301026152736227328",
          "group": "2"
      },
      {
          "id": "1300405122779025408",
          "group": "2"
      },
      {
          "id": "1301290332676665344",
          "group": "2"
      },
      {
          "id": "1300859823685283840",
          "group": "2"
      },
      {
          "id": "1301318432613433344",
          "group": "2"
      },
      {
          "id": "1301355778717216768",
          "group": "2"
      },
      {
          "id": "1301195513241513984",
          "group": "2"
      },
      {
          "id": "1301248219507290112",
          "group": "2"
      },
      {
          "id": "1301028107764338688",
          "group": "2"
      },
      {
          "id": "1300496465899458560",
          "group": "2"
      },
      {
          "id": "1301265737055711232",
          "group": "2"
      },
      {
          "id": "1300691849724801024",
          "group": "2"
      },
      {
          "id": "1301350108278280192",
          "group": "2"
      },
      {
          "id": "1300563297180282880",
          "group": "2"
      },
      {
          "id": "1301361852421672960",
          "group": "2"
      },
      {
          "id": "1301334592285270016",
          "group": "2"
      },
      {
          "id": "1301351838764142592",
          "group": "2"
      },
      {
          "id": "1301129774702747648",
          "group": "2"
      },
      {
          "id": "1301357046588215296",
          "group": "2"
      },
      {
          "id": "1301347926208282624",
          "group": "2"
      },
      {
          "id": "1300405149115052032",
          "group": "2"
      },
      {
          "id": "1318501741701324800",
          "group": "2"
      },
      {
          "id": "1298767196517273600",
          "group": "2"
      },
      {
          "id": "1301101129133154304",
          "group": "2"
      },
      {
          "id": "1308489387034980352",
          "group": "2"
      },
      {
          "id": "1301013927145484288",
          "group": "2"
      },
      {
          "id": "1301355346183819264",
          "group": "2"
      },
      {
          "id": "1299094555812388864",
          "group": "2"
      },
      {
          "id": "1301000260932829184",
          "group": "2"
      },
      {
          "id": "1301374028003774464",
          "group": "2"
      },
      {
          "id": "1301369329905209344",
          "group": "2"
      },
      {
          "id": "1310702649533235200",
          "group": "2"
      },
      {
          "id": "1301356234948444160",
          "group": "2"
      },
      {
          "id": "1301342845282942976",
          "group": "2"
      },
      {
          "id": "1301350845590704128",
          "group": "2"
      },
      {
          "id": "1314214214215503872",
          "group": "2"
      },
      {
          "id": "1301030923442552832",
          "group": "2"
      },
      {
          "id": "1301333698709803008",
          "group": "2"
      },
      {
          "id": "1301478837373591552",
          "group": "2"
      },
      {
          "id": "1301354546627776512",
          "group": "2"
      },
      {
          "id": "1301322422482735104",
          "group": "2"
      },
      {
          "id": "1301236126779310080",
          "group": "2"
      },
      {
          "id": "1300448248176488448",
          "group": "2"
      },
      {
          "id": "1301350548025815040",
          "group": "2"
      },
      {
          "id": "1301025343529246720",
          "group": "2"
      },
      {
          "id": "1301315569392726016",
          "group": "2"
      },
      {
          "id": "1300998965752737792",
          "group": "2"
      },
      {
          "id": "1301017154704347136",
          "group": "2"
      },
      {
          "id": "1298610562306379776",
          "group": "2"
      },
      {
          "id": "1301370350459125760",
          "group": "2"
      },
      {
          "id": "1301490206248501248",
          "group": "2"
      },
      {
          "id": "1301017618107727872",
          "group": "2"
      },
      {
          "id": "1301527019054718976",
          "group": "2"
      },
      {
          "id": "1299305189304918016",
          "group": "2"
      },
      {
          "id": "1300713722445524992",
          "group": "2"
      },
      {
          "id": "1301353632361836544",
          "group": "2"
      },
      {
          "id": "1300449100291284992",
          "group": "2"
      },
      {
          "id": "1300690902130872320",
          "group": "2"
      },
      {
          "id": "1300798061980119040",
          "group": "2"
      },
      {
          "id": "1300984992592523264",
          "group": "2"
      },
      {
          "id": "1301355903971725312",
          "group": "2"
      },
      {
          "id": "1301348699877126144",
          "group": "2"
      },
      {
          "id": "1301014359687262208",
          "group": "2"
      },
      {
          "id": "1301027303317798912",
          "group": "2"
      },
      {
          "id": "1305562455540670464",
          "group": "2"
      },
      {
          "id": "1300814761215524864",
          "group": "2"
      },
      {
          "id": "1301294983035727872",
          "group": "2"
      },
      {
          "id": "1301354263646531584",
          "group": "2"
      },
      {
          "id": "1300111438481100800",
          "group": "2"
      },
      {
          "id": "1300961287057403904",
          "group": "2"
      },
      {
          "id": "1317104535387709440",
          "group": "2"
      },
      {
          "id": "1301337858859565056",
          "group": "2"
      },
      {
          "id": "1301000646582177792",
          "group": "2"
      },
      {
          "id": "1301321005462425600",
          "group": "2"
      },
      {
          "id": "1301350419663400960",
          "group": "2"
      },
      {
          "id": "1301508677627793408",
          "group": "2"
      },
      {
          "id": "1316417434337914880",
          "group": "2"
      },
      {
          "id": "1301385131068973056",
          "group": "2"
      },
      {
          "id": "1301497940826095616",
          "group": "2"
      },
      {
          "id": "1301014093906800640",
          "group": "2"
      },
      {
          "id": "1301160388650729472",
          "group": "2"
      },
      {
          "id": "1300884549812072448",
          "group": "2"
      },
      {
          "id": "1301205715189665792",
          "group": "2"
      },
      {
          "id": "1299744972606930944",
          "group": "2"
      },
      {
          "id": "1299367322935754752",
          "group": "2"
      },
      {
          "id": "1301350295486771200",
          "group": "2"
      },
      {
          "id": "1300740299493445632",
          "group": "2"
      },
      {
          "id": "1301265492984893440",
          "group": "2"
      },
      {
          "id": "1300716352819392512",
          "group": "2"
      },
      {
          "id": "1300590862754349056",
          "group": "2"
      },
      {
          "id": "1301139115019251712",
          "group": "2"
      },
      {
          "id": "1301335068460359680",
          "group": "2"
      },
      {
          "id": "1300691830309257216",
          "group": "2"
      },
      {
          "id": "1301031151423889408",
          "group": "2"
      },
      {
          "id": "1301188112484364288",
          "group": "2"
      },
      {
          "id": "1301385730611204096",
          "group": "2"
      },
      {
          "id": "1315641466044194816",
          "group": "2"
      },
      {
          "id": "1300490687155232768",
          "group": "2"
      },
      {
          "id": "1300603773220515840",
          "group": "2"
      },
      {
          "id": "1299791310937878528",
          "group": "2"
      },
      {
          "id": "1300563102635880448",
          "group": "2"
      },
      {
          "id": "1300941801369612288",
          "group": "2"
      },
      {
          "id": "1301513012579373056",
          "group": "2"
      },
      {
          "id": "1300968282749624320",
          "group": "2"
      },
      {
          "id": "1301026053012492288",
          "group": "2"
      },
      {
          "id": "1300469565319675904",
          "group": "2"
      },
      {
          "id": "1301017726086000640",
          "group": "2"
      },
      {
          "id": "1298628346532835328",
          "group": "2"
      },
      {
          "id": "1300503135333609472",
          "group": "2"
      },
      {
          "id": "1301308463826558976",
          "group": "2"
      },
      {
          "id": "1306579921662337024",
          "group": "2"
      },
      {
          "id": "1301315538027778048",
          "group": "2"
      },
      {
          "id": "1301352730301267968",
          "group": "2"
      },
      {
          "id": "1301350797805080576",
          "group": "2"
      },
      {
          "id": "1301352917220327424",
          "group": "2"
      },
      {
          "id": "1300756491943792640",
          "group": "2"
      },
      {
          "id": "1301014200421150720",
          "group": "2"
      },
      {
          "id": "1300278652509265920",
          "group": "2"
      },
      {
          "id": "1301505263430782976",
          "group": "2"
      },
      {
          "id": "1318552550761660416",
          "group": "2"
      },
      {
          "id": "1301191533216108544",
          "group": "2"
      },
      {
          "id": "1300911811227578368",
          "group": "2"
      },
      {
          "id": "1301026808960364544",
          "group": "2"
      },
      {
          "id": "1301001962956103680",
          "group": "2"
      },
      {
          "id": "1301348698971045888",
          "group": "2"
      },
      {
          "id": "1301030925606760448",
          "group": "2"
      },
      {
          "id": "1301026428679528448",
          "group": "2"
      },
      {
          "id": "1299760130465161216",
          "group": "2"
      },
      {
          "id": "1301351994930626560",
          "group": "2"
      },
      {
          "id": "1301273725552046080",
          "group": "2"
      },
      {
          "id": "1301029260535238656",
          "group": "2"
      },
      {
          "id": "1301530388997832704",
          "group": "2"
      },
      {
          "id": "1301354919514046464",
          "group": "2"
      },
      {
          "id": "1301118705246572544",
          "group": "2"
      },
      {
          "id": "1301492309637443584",
          "group": "2"
      },
      {
          "id": "1301332141461172224",
          "group": "2"
      },
      {
          "id": "1301359264229974016",
          "group": "2"
      },
      {
          "id": "1301358174600134656",
          "group": "2"
      },
      {
          "id": "1300837412839583744",
          "group": "2"
      },
      {
          "id": "1298764943366459392",
          "group": "2"
      },
      {
          "id": "1301029060303294464",
          "group": "2"
      },
      {
          "id": "1300961724833636352",
          "group": "2"
      },
      {
          "id": "1301332136717422592",
          "group": "2"
      },
      {
          "id": "1298824696201265152",
          "group": "2"
      },
      {
          "id": "1301187725593317376",
          "group": "2"
      },
      {
          "id": "1301021044937981952",
          "group": "2"
      },
      {
          "id": "1301385288112123904",
          "group": "2"
      },
      {
          "id": "1315776092154855424",
          "group": "2"
      },
      {
          "id": "1301305691316002816",
          "group": "2"
      },
      {
          "id": "1301275843646369792",
          "group": "2"
      },
      {
          "id": "1301353912851726336",
          "group": "2"
      },
      {
          "id": "1299626624137261056",
          "group": "2"
      },
      {
          "id": "1299323329447440384",
          "group": "2"
      },
      {
          "id": "1315742838307663872",
          "group": "2"
      },
      {
          "id": "1300196908028362752",
          "group": "2"
      },
      {
          "id": "1300990904744935424",
          "group": "2"
      },
      {
          "id": "1301162367481458688",
          "group": "2"
      },
      {
          "id": "1301028816144527360",
          "group": "2"
      },
      {
          "id": "1300933957018554368",
          "group": "2"
      },
      {
          "id": "1300589460636213248",
          "group": "2"
      },
      {
          "id": "1300199503933460480",
          "group": "2"
      },
      {
          "id": "1301350660189847552",
          "group": "2"
      },
      {
          "id": "1301357765345112064",
          "group": "2"
      },
      {
          "id": "1300454475711250432",
          "group": "2"
      },
      {
          "id": "1301014203730481152",
          "group": "2"
      },
      {
          "id": "1301017365434568704",
          "group": "2"
      },
      {
          "id": "1299442556695175168",
          "group": "2"
      },
      {
          "id": "1301017502860926976",
          "group": "2"
      },
      {
          "id": "1301028108506664960",
          "group": "2"
      },
      {
          "id": "1301018619372019712",
          "group": "2"
      },
      {
          "id": "1300786085170221056",
          "group": "2"
      },
      {
          "id": "1301025324675854336",
          "group": "2"
      },
      {
          "id": "1300393411858575360",
          "group": "2"
      },
      {
          "id": "1300511178033180672",
          "group": "2"
      },
      {
          "id": "1301181696415600640",
          "group": "2"
      },
      {
          "id": "1298768721201242112",
          "group": "2"
      },
      {
          "id": "1299119948636323840",
          "group": "2"
      },
      {
          "id": "1301526991213154304",
          "group": "2"
      },
      {
          "id": "1301331049084051456",
          "group": "2"
      },
      {
          "id": "1301349266355621888",
          "group": "2"
      },
      {
          "id": "1301025036527112192",
          "group": "2"
      },
      {
          "id": "1309615560263708672",
          "group": "2"
      },
      {
          "id": "1300513778447122432",
          "group": "2"
      },
      {
          "id": "1300128717386190848",
          "group": "2"
      },
      {
          "id": "1301504088799145984",
          "group": "2"
      },
      {
          "id": "1298623210892730368",
          "group": "2"
      },
      {
          "id": "1301030822124949504",
          "group": "2"
      },
      {
          "id": "1301337816023130112",
          "group": "2"
      },
      {
          "id": "1300625682360414208",
          "group": "2"
      },
      {
          "id": "1300397703252381696",
          "group": "2"
      },
      {
          "id": "1301351154304122880",
          "group": "2"
      },
      {
          "id": "1301510145046970368",
          "group": "2"
      },
      {
          "id": "1301017533689069568",
          "group": "2"
      },
      {
          "id": "1301359167278665728",
          "group": "2"
      },
      {
          "id": "1300075247685828608",
          "group": "2"
      },
      {
          "id": "1301347021106876416",
          "group": "2"
      },
      {
          "id": "1301128364946870272",
          "group": "2"
      },
      {
          "id": "1300453265436536832",
          "group": "2"
      },
      {
          "id": "1300405127447302144",
          "group": "2"
      },
      {
          "id": "1298435494259437568",
          "group": "2"
      },
      {
          "id": "1299855918847406080",
          "group": "2"
      },
      {
          "id": "1301027936175300608",
          "group": "2"
      },
      {
          "id": "1301305963476135936",
          "group": "2"
      },
      {
          "id": "1301350515553587200",
          "group": "2"
      },
      {
          "id": "1300411619625914368",
          "group": "2"
      },
      {
          "id": "1300345358204235776",
          "group": "2"
      },
      {
          "id": "1301184226197475328",
          "group": "2"
      },
      {
          "id": "1301289493513854976",
          "group": "2"
      },
      {
          "id": "1300441454628798464",
          "group": "2"
      },
      {
          "id": "1301024797128904704",
          "group": "2"
      },
      {
          "id": "1301025330061365248",
          "group": "2"
      },
      {
          "id": "1301385486984982528",
          "group": "2"
      },
      {
          "id": "1301337929651032064",
          "group": "2"
      },
      {
          "id": "1301354844339539968",
          "group": "2"
      },
      {
          "id": "1301030877707763712",
          "group": "2"
      },
      {
          "id": "1311329716360613888",
          "group": "2"
      },
      {
          "id": "1301023384327917568",
          "group": "2"
      },
      {
          "id": "1300092359972065280",
          "group": "2"
      },
      {
          "id": "1301338116389822464",
          "group": "2"
      },
      {
          "id": "1315965027128672256",
          "group": "2"
      },
      {
          "id": "1298768695058104320",
          "group": "2"
      },
      {
          "id": "1301351482462175232",
          "group": "2"
      },
      {
          "id": "1298622830624546816",
          "group": "2"
      },
      {
          "id": "1301016940295659520",
          "group": "2"
      },
      {
          "id": "1301351552582651904",
          "group": "2"
      },
      {
          "id": "1300962193735905280",
          "group": "2"
      },
      {
          "id": "1301030381408473088",
          "group": "2"
      },
      {
          "id": "1301374744101638144",
          "group": "2"
      },
      {
          "id": "1300985979373858816",
          "group": "2"
      },
      {
          "id": "1300844198795653120",
          "group": "2"
      },
      {
          "id": "1301334335937753088",
          "group": "2"
      },
      {
          "id": "1300933921245409280",
          "group": "2"
      },
      {
          "id": "1301193640434434048",
          "group": "2"
      },
      {
          "id": "1299436076428398592",
          "group": "2"
      },
      {
          "id": "1299274233940410368",
          "group": "2"
      },
      {
          "id": "1301353696236843008",
          "group": "2"
      },
      {
          "id": "1300333195481808896",
          "group": "2"
      },
      {
          "id": "1299792691337859072",
          "group": "2"
      },
      {
          "id": "1301316043890139136",
          "group": "2"
      },
      {
          "id": "1301031146294325248",
          "group": "2"
      },
      {
          "id": "1300405151853948928",
          "group": "2"
      },
      {
          "id": "1300462858162106368",
          "group": "2"
      },
      {
          "id": "1301025346540756992",
          "group": "2"
      },
      {
          "id": "1301347774928224256",
          "group": "2"
      },
      {
          "id": "1301491791175331840",
          "group": "2"
      },
      {
          "id": "1300544523907588096",
          "group": "2"
      },
      {
          "id": "1316364392150306816",
          "group": "2"
      },
      {
          "id": "1301029647203864576",
          "group": "2"
      },
      {
          "id": "1300965925106208768",
          "group": "2"
      },
      {
          "id": "1301028512992722944",
          "group": "2"
      },
      {
          "id": "1301374067400876032",
          "group": "2"
      },
      {
          "id": "1301349943832195072",
          "group": "2"
      },
      {
          "id": "1301129978529148928",
          "group": "2"
      },
      {
          "id": "1300833791104233472",
          "group": "2"
      },
      {
          "id": "1306582426433523712",
          "group": "2"
      },
      {
          "id": "1300408475147743232",
          "group": "2"
      },
      {
          "id": "1300433201685393408",
          "group": "2"
      },
      {
          "id": "1301515815863361536",
          "group": "2"
      },
      {
          "id": "1306674030091464704",
          "group": "2"
      },
      {
          "id": "1301320360370089984",
          "group": "2"
      },
      {
          "id": "1301350989363122176",
          "group": "2"
      },
      {
          "id": "1301354168142180352",
          "group": "2"
      },
      {
          "id": "1300780294715342848",
          "group": "2"
      },
      {
          "id": "1301123959497224192",
          "group": "2"
      },
      {
          "id": "1301013102876598272",
          "group": "2"
      },
      {
          "id": "1301361737334231040",
          "group": "2"
      },
      {
          "id": "1300987181507448832",
          "group": "2"
      },
      {
          "id": "1301150569072152576",
          "group": "2"
      },
      {
          "id": "1301350955796094976",
          "group": "2"
      },
      {
          "id": "1301374414433345536",
          "group": "2"
      },
      {
          "id": "1300405130194563072",
          "group": "2"
      },
      {
          "id": "1301567414094757888",
          "group": "2"
      },
      {
          "id": "1301385713167073280",
          "group": "2"
      },
      {
          "id": "1300512750041432064",
          "group": "2"
      }
  ],
  "links": [
      {
          "source": "1070548784076255232",
          "target": "1301027575259697152",
          "value": 1
      },
      {
          "source": "993609081343668224",
          "target": "1300196285656576000",
          "value": 1
      },
      {
          "source": "1084517874184736768",
          "target": "1300131862006898688",
          "value": 1
      },
      {
          "source": "1070548784076255232",
          "target": "1301026152736227328",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300405122779025408",
          "value": 1
      },
      {
          "source": "306359551",
          "target": "1301290332676665344",
          "value": 1
      },
      {
          "source": "796893205925076992",
          "target": "1300859823685283840",
          "value": 1
      },
      {
          "source": "1256820158536077312",
          "target": "1301318432613433344",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301355778717216768",
          "value": 1
      },
      {
          "source": "1210755568031240192",
          "target": "1301195513241513984",
          "value": 1
      },
      {
          "source": "3370203149",
          "target": "1301248219507290112",
          "value": 1
      },
      {
          "source": "816285077432844288",
          "target": "1301028107764338688",
          "value": 1
      },
      {
          "source": "520386868",
          "target": "1300496465899458560",
          "value": 1
      },
      {
          "source": "3370203149",
          "target": "1301265737055711232",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300691849724801024",
          "value": 1
      },
      {
          "source": "1138476515090468864",
          "target": "1301350108278280192",
          "value": 1
      },
      {
          "source": "1190332661765722112",
          "target": "1300563297180282880",
          "value": 1
      },
      {
          "source": "988885393104932864",
          "target": "1301361852421672960",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301334592285270016",
          "value": 1
      },
      {
          "source": "568812080",
          "target": "1301351838764142592",
          "value": 1
      },
      {
          "source": "971935915517120512",
          "target": "1301129774702747648",
          "value": 1
      },
      {
          "source": "208586222",
          "target": "1301357046588215296",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301347926208282624",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300405149115052032",
          "value": 1
      },
      {
          "source": "943478278299570176",
          "target": "1318501741701324800",
          "value": 1
      },
      {
          "source": "33884545",
          "target": "1298767196517273600",
          "value": 1
      },
      {
          "source": "229001251",
          "target": "1301101129133154304",
          "value": 1
      },
      {
          "source": "1257360895384211456",
          "target": "1308489387034980352",
          "value": 1
      },
      {
          "source": "237494612",
          "target": "1301013927145484288",
          "value": 1
      },
      {
          "source": "208586222",
          "target": "1301355346183819264",
          "value": 1
      },
      {
          "source": "1026181604903985152",
          "target": "1299094555812388864",
          "value": 1
      },
      {
          "source": "1179841231070867456",
          "target": "1301000260932829184",
          "value": 1
      },
      {
          "source": "1298116917996085248",
          "target": "1301374028003774464",
          "value": 1
      },
      {
          "source": "1292768664241012736",
          "target": "1301369329905209344",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1310702649533235200",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301356234948444160",
          "value": 1
      },
      {
          "source": "1179841231070867456",
          "target": "1301342845282942976",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301350845590704128",
          "value": 1
      },
      {
          "source": "264529969",
          "target": "1314214214215503872",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301030923442552832",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301333698709803008",
          "value": 1
      },
      {
          "source": "87267769",
          "target": "1301478837373591552",
          "value": 1
      },
      {
          "source": "988885393104932864",
          "target": "1301354546627776512",
          "value": 1
      },
      {
          "source": "144741178",
          "target": "1301322422482735104",
          "value": 1
      },
      {
          "source": "144741178",
          "target": "1301236126779310080",
          "value": 1
      },
      {
          "source": "158622681",
          "target": "1300448248176488448",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301350548025815040",
          "value": 1
      },
      {
          "source": "2278617572",
          "target": "1301025343529246720",
          "value": 1
      },
      {
          "source": "3370203149",
          "target": "1301315569392726016",
          "value": 1
      },
      {
          "source": "1179841231070867456",
          "target": "1300998965752737792",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301017154704347136",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1298610562306379776",
          "value": 1
      },
      {
          "source": "573189708",
          "target": "1301370350459125760",
          "value": 1
      },
      {
          "source": "1230952426473238528",
          "target": "1301490206248501248",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301017618107727872",
          "value": 1
      },
      {
          "source": "1236446217913217024",
          "target": "1301527019054718976",
          "value": 1
      },
      {
          "source": "125382672",
          "target": "1299305189304918016",
          "value": 1
      },
      {
          "source": "293630074",
          "target": "1300713722445524992",
          "value": 1
      },
      {
          "source": "1270862759165493248",
          "target": "1301353632361836544",
          "value": 1
      },
      {
          "source": "158622681",
          "target": "1300449100291284992",
          "value": 1
      },
      {
          "source": "293630074",
          "target": "1300690902130872320",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1300798061980119040",
          "value": 1
      },
      {
          "source": "1260590009939308544",
          "target": "1300984992592523264",
          "value": 1
      },
      {
          "source": "1270862759165493248",
          "target": "1301355903971725312",
          "value": 1
      },
      {
          "source": "1260590009939308544",
          "target": "1301348699877126144",
          "value": 1
      },
      {
          "source": "333540046",
          "target": "1301014359687262208",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301027303317798912",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1305562455540670464",
          "value": 1
      },
      {
          "source": "1292768664241012736",
          "target": "1300814761215524864",
          "value": 1
      },
      {
          "source": "306359551",
          "target": "1301294983035727872",
          "value": 1
      },
      {
          "source": "33884545",
          "target": "1301354263646531584",
          "value": 1
      },
      {
          "source": "264529969",
          "target": "1300111438481100800",
          "value": 1
      },
      {
          "source": "828005341791141888",
          "target": "1300961287057403904",
          "value": 1
      },
      {
          "source": "943478278299570176",
          "target": "1317104535387709440",
          "value": 1
      },
      {
          "source": "87267769",
          "target": "1301337858859565056",
          "value": 1
      },
      {
          "source": "152358615",
          "target": "1301000646582177792",
          "value": 1
      },
      {
          "source": "1256820158536077312",
          "target": "1301321005462425600",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301350419663400960",
          "value": 1
      },
      {
          "source": "1206656672103579648",
          "target": "1301508677627793408",
          "value": 1
      },
      {
          "source": "1257360895384211456",
          "target": "1316417434337914880",
          "value": 1
      },
      {
          "source": "6468102",
          "target": "1301385131068973056",
          "value": 1
      },
      {
          "source": "1281618068238675968",
          "target": "1301497940826095616",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301014093906800640",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1301160388650729472",
          "value": 1
      },
      {
          "source": "264529969",
          "target": "1300884549812072448",
          "value": 1
      },
      {
          "source": "293630074",
          "target": "1301205715189665792",
          "value": 1
      },
      {
          "source": "780980779",
          "target": "1299744972606930944",
          "value": 1
      },
      {
          "source": "293814789",
          "target": "1299367322935754752",
          "value": 1
      },
      {
          "source": "1138476515090468864",
          "target": "1301350295486771200",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1300740299493445632",
          "value": 1
      },
      {
          "source": "3370203149",
          "target": "1301265492984893440",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1300716352819392512",
          "value": 1
      },
      {
          "source": "369249116",
          "target": "1300590862754349056",
          "value": 1
      },
      {
          "source": "971935915517120512",
          "target": "1301139115019251712",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301335068460359680",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300691830309257216",
          "value": 1
      },
      {
          "source": "2839908580",
          "target": "1301031151423889408",
          "value": 1
      },
      {
          "source": "1210755568031240192",
          "target": "1301188112484364288",
          "value": 1
      },
      {
          "source": "6468102",
          "target": "1301385730611204096",
          "value": 1
      },
      {
          "source": "253073339",
          "target": "1315641466044194816",
          "value": 1
      },
      {
          "source": "2754005176",
          "target": "1300490687155232768",
          "value": 1
      },
      {
          "source": "1206656672103579648",
          "target": "1300603773220515840",
          "value": 1
      },
      {
          "source": "2472026007",
          "target": "1299791310937878528",
          "value": 1
      },
      {
          "source": "780980779",
          "target": "1300563102635880448",
          "value": 1
      },
      {
          "source": "1080352563218841600",
          "target": "1300941801369612288",
          "value": 1
      },
      {
          "source": "1005103898556760064",
          "target": "1301513012579373056",
          "value": 1
      },
      {
          "source": "1297963146007785472",
          "target": "1300968282749624320",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301026053012492288",
          "value": 1
      },
      {
          "source": "1230952426473238528",
          "target": "1300469565319675904",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301017726086000640",
          "value": 1
      },
      {
          "source": "2278617572",
          "target": "1298628346532835328",
          "value": 1
      },
      {
          "source": "520386868",
          "target": "1300503135333609472",
          "value": 1
      },
      {
          "source": "1256820158536077312",
          "target": "1301308463826558976",
          "value": 1
      },
      {
          "source": "253073339",
          "target": "1306579921662337024",
          "value": 1
      },
      {
          "source": "1256820158536077312",
          "target": "1301315538027778048",
          "value": 1
      },
      {
          "source": "274384591",
          "target": "1301352730301267968",
          "value": 1
      },
      {
          "source": "274384591",
          "target": "1301350797805080576",
          "value": 1
      },
      {
          "source": "1080352563218841600",
          "target": "1301352917220327424",
          "value": 1
      },
      {
          "source": "1026181604903985152",
          "target": "1300756491943792640",
          "value": 1
      },
      {
          "source": "333540046",
          "target": "1301014200421150720",
          "value": 1
      },
      {
          "source": "1080352563218841600",
          "target": "1300278652509265920",
          "value": 1
      },
      {
          "source": "33884545",
          "target": "1301505263430782976",
          "value": 1
      },
      {
          "source": "1257360895384211456",
          "target": "1318552550761660416",
          "value": 1
      },
      {
          "source": "1210755568031240192",
          "target": "1301191533216108544",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1300911811227578368",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301026808960364544",
          "value": 1
      },
      {
          "source": "1244693460088545280",
          "target": "1301001962956103680",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301348698971045888",
          "value": 1
      },
      {
          "source": "2839908580",
          "target": "1301030925606760448",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301026428679528448",
          "value": 1
      },
      {
          "source": "1248730122565320704",
          "target": "1299760130465161216",
          "value": 1
      },
      {
          "source": "568812080",
          "target": "1301351994930626560",
          "value": 1
      },
      {
          "source": "1244693460088545280",
          "target": "1301273725552046080",
          "value": 1
      },
      {
          "source": "2472026007",
          "target": "1301029260535238656",
          "value": 1
      },
      {
          "source": "567652472",
          "target": "1301530388997832704",
          "value": 1
      },
      {
          "source": "993609081343668224",
          "target": "1301354919514046464",
          "value": 1
      },
      {
          "source": "780980779",
          "target": "1301118705246572544",
          "value": 1
      },
      {
          "source": "1281618068238675968",
          "target": "1301492309637443584",
          "value": 1
      },
      {
          "source": "212591707",
          "target": "1301332141461172224",
          "value": 1
      },
      {
          "source": "567652472",
          "target": "1301359264229974016",
          "value": 1
      },
      {
          "source": "1244693460088545280",
          "target": "1301358174600134656",
          "value": 1
      },
      {
          "source": "2360832798",
          "target": "1300837412839583744",
          "value": 1
      },
      {
          "source": "720580396832972800",
          "target": "1298764943366459392",
          "value": 1
      },
      {
          "source": "237494612",
          "target": "1301029060303294464",
          "value": 1
      },
      {
          "source": "828005341791141888",
          "target": "1300961724833636352",
          "value": 1
      },
      {
          "source": "212591707",
          "target": "1301332136717422592",
          "value": 1
      },
      {
          "source": "1244693460088545280",
          "target": "1298824696201265152",
          "value": 1
      },
      {
          "source": "1210755568031240192",
          "target": "1301187725593317376",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301021044937981952",
          "value": 1
      },
      {
          "source": "6468102",
          "target": "1301385288112123904",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1315776092154855424",
          "value": 1
      },
      {
          "source": "816285077432844288",
          "target": "1301305691316002816",
          "value": 1
      },
      {
          "source": "816285077432844288",
          "target": "1301275843646369792",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301353912851726336",
          "value": 1
      },
      {
          "source": "2360832798",
          "target": "1299626624137261056",
          "value": 1
      },
      {
          "source": "1206656672103579648",
          "target": "1299323329447440384",
          "value": 1
      },
      {
          "source": "1257360895384211456",
          "target": "1315742838307663872",
          "value": 1
      },
      {
          "source": "293814789",
          "target": "1300196908028362752",
          "value": 1
      },
      {
          "source": "780980779",
          "target": "1300990904744935424",
          "value": 1
      },
      {
          "source": "125382672",
          "target": "1301162367481458688",
          "value": 1
      },
      {
          "source": "1005103898556760064",
          "target": "1301028816144527360",
          "value": 1
      },
      {
          "source": "152358615",
          "target": "1300933957018554368",
          "value": 1
      },
      {
          "source": "796893205925076992",
          "target": "1300589460636213248",
          "value": 1
      },
      {
          "source": "125382672",
          "target": "1300199503933460480",
          "value": 1
      },
      {
          "source": "274384591",
          "target": "1301350660189847552",
          "value": 1
      },
      {
          "source": "274384591",
          "target": "1301357765345112064",
          "value": 1
      },
      {
          "source": "158622681",
          "target": "1300454475711250432",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301014203730481152",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301017365434568704",
          "value": 1
      },
      {
          "source": "2360832798",
          "target": "1299442556695175168",
          "value": 1
      },
      {
          "source": "2754005176",
          "target": "1301017502860926976",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301028108506664960",
          "value": 1
      },
      {
          "source": "369249116",
          "target": "1301018619372019712",
          "value": 1
      },
      {
          "source": "1297963146007785472",
          "target": "1300786085170221056",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301025324675854336",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1300393411858575360",
          "value": 1
      },
      {
          "source": "567652472",
          "target": "1300511178033180672",
          "value": 1
      },
      {
          "source": "1026181604903985152",
          "target": "1301181696415600640",
          "value": 1
      },
      {
          "source": "796893205925076992",
          "target": "1298768721201242112",
          "value": 1
      },
      {
          "source": "1097632215305990144",
          "target": "1299119948636323840",
          "value": 1
      },
      {
          "source": "1248730122565320704",
          "target": "1301526991213154304",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301331049084051456",
          "value": 1
      },
      {
          "source": "573189708",
          "target": "1301349266355621888",
          "value": 1
      },
      {
          "source": "1070548784076255232",
          "target": "1301025036527112192",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1309615560263708672",
          "value": 1
      },
      {
          "source": "520386868",
          "target": "1300513778447122432",
          "value": 1
      },
      {
          "source": "796893205925076992",
          "target": "1300128717386190848",
          "value": 1
      },
      {
          "source": "229001251",
          "target": "1301504088799145984",
          "value": 1
      },
      {
          "source": "1084517874184736768",
          "target": "1298623210892730368",
          "value": 1
      },
      {
          "source": "2839908580",
          "target": "1301030822124949504",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301337816023130112",
          "value": 1
      },
      {
          "source": "2754005176",
          "target": "1300625682360414208",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1300397703252381696",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301351154304122880",
          "value": 1
      },
      {
          "source": "1281618068238675968",
          "target": "1301510145046970368",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301017533689069568",
          "value": 1
      },
      {
          "source": "1236446217913217024",
          "target": "1301359167278665728",
          "value": 1
      },
      {
          "source": "229001251",
          "target": "1300075247685828608",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301347021106876416",
          "value": 1
      },
      {
          "source": "971935915517120512",
          "target": "1301128364946870272",
          "value": 1
      },
      {
          "source": "1097632215305990144",
          "target": "1300453265436536832",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300405127447302144",
          "value": 1
      },
      {
          "source": "1273012654815301632",
          "target": "1298435494259437568",
          "value": 1
      },
      {
          "source": "816285077432844288",
          "target": "1299855918847406080",
          "value": 1
      },
      {
          "source": "705944604160487424",
          "target": "1301027936175300608",
          "value": 1
      },
      {
          "source": "306359551",
          "target": "1301305963476135936",
          "value": 1
      },
      {
          "source": "1260590009939308544",
          "target": "1301350515553587200",
          "value": 1
      },
      {
          "source": "1190332661765722112",
          "target": "1300411619625914368",
          "value": 1
      },
      {
          "source": "293814789",
          "target": "1300345358204235776",
          "value": 1
      },
      {
          "source": "1210755568031240192",
          "target": "1301184226197475328",
          "value": 1
      },
      {
          "source": "208586222",
          "target": "1301289493513854976",
          "value": 1
      },
      {
          "source": "720580396832972800",
          "target": "1300441454628798464",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301024797128904704",
          "value": 1
      },
      {
          "source": "2278617572",
          "target": "1301025330061365248",
          "value": 1
      },
      {
          "source": "6468102",
          "target": "1301385486984982528",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301337929651032064",
          "value": 1
      },
      {
          "source": "993609081343668224",
          "target": "1301354844339539968",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301030877707763712",
          "value": 1
      },
      {
          "source": "1257360895384211456",
          "target": "1311329716360613888",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301023384327917568",
          "value": 1
      },
      {
          "source": "720580396832972800",
          "target": "1300092359972065280",
          "value": 1
      },
      {
          "source": "87267769",
          "target": "1301338116389822464",
          "value": 1
      },
      {
          "source": "943478278299570176",
          "target": "1315965027128672256",
          "value": 1
      },
      {
          "source": "1097632215305990144",
          "target": "1298768695058104320",
          "value": 1
      },
      {
          "source": "1138476515090468864",
          "target": "1301351482462175232",
          "value": 1
      },
      {
          "source": "1084517874184736768",
          "target": "1298622830624546816",
          "value": 1
      },
      {
          "source": "333540046",
          "target": "1301016940295659520",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301351552582651904",
          "value": 1
      },
      {
          "source": "828005341791141888",
          "target": "1300962193735905280",
          "value": 1
      },
      {
          "source": "850011581832474624",
          "target": "1301030381408473088",
          "value": 1
      },
      {
          "source": "573189708",
          "target": "1301374744101638144",
          "value": 1
      },
      {
          "source": "212591707",
          "target": "1300985979373858816",
          "value": 1
      },
      {
          "source": "152358615",
          "target": "1300844198795653120",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301334335937753088",
          "value": 1
      },
      {
          "source": "253073339",
          "target": "1300933921245409280",
          "value": 1
      },
      {
          "source": "125382672",
          "target": "1301193640434434048",
          "value": 1
      },
      {
          "source": "1273012654815301632",
          "target": "1299436076428398592",
          "value": 1
      },
      {
          "source": "1005103898556760064",
          "target": "1299274233940410368",
          "value": 1
      },
      {
          "source": "988885393104932864",
          "target": "1301353696236843008",
          "value": 1
      },
      {
          "source": "1230952426473238528",
          "target": "1300333195481808896",
          "value": 1
      },
      {
          "source": "567652472",
          "target": "1299792691337859072",
          "value": 1
      },
      {
          "source": "306359551",
          "target": "1301316043890139136",
          "value": 1
      },
      {
          "source": "4352085639",
          "target": "1301031146294325248",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300405151853948928",
          "value": 1
      },
      {
          "source": "1248730122565320704",
          "target": "1300462858162106368",
          "value": 1
      },
      {
          "source": "2278617572",
          "target": "1301025346540756992",
          "value": 1
      },
      {
          "source": "568812080",
          "target": "1301347774928224256",
          "value": 1
      },
      {
          "source": "1281618068238675968",
          "target": "1301491791175331840",
          "value": 1
      },
      {
          "source": "369249116",
          "target": "1300544523907588096",
          "value": 1
      },
      {
          "source": "253073339",
          "target": "1316364392150306816",
          "value": 1
      },
      {
          "source": "705944604160487424",
          "target": "1301029647203864576",
          "value": 1
      },
      {
          "source": "1244693460088545280",
          "target": "1300965925106208768",
          "value": 1
      },
      {
          "source": "705944604160487424",
          "target": "1301028512992722944",
          "value": 1
      },
      {
          "source": "1298116917996085248",
          "target": "1301374067400876032",
          "value": 1
      },
      {
          "source": "2225613776",
          "target": "1301349943832195072",
          "value": 1
      },
      {
          "source": "971935915517120512",
          "target": "1301129978529148928",
          "value": 1
      },
      {
          "source": "1292768664241012736",
          "target": "1300833791104233472",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1306582426433523712",
          "value": 1
      },
      {
          "source": "2472026007",
          "target": "1300408475147743232",
          "value": 1
      },
      {
          "source": "1236446217913217024",
          "target": "1300433201685393408",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301515815863361536",
          "value": 1
      },
      {
          "source": "1089157733767675904",
          "target": "1306674030091464704",
          "value": 1
      },
      {
          "source": "3370203149",
          "target": "1301320360370089984",
          "value": 1
      },
      {
          "source": "816285077432844288",
          "target": "1301350989363122176",
          "value": 1
      },
      {
          "source": "1270862759165493248",
          "target": "1301354168142180352",
          "value": 1
      },
      {
          "source": "1190332661765722112",
          "target": "1300780294715342848",
          "value": 1
      },
      {
          "source": "229001251",
          "target": "1301123959497224192",
          "value": 1
      },
      {
          "source": "237494612",
          "target": "1301013102876598272",
          "value": 1
      },
      {
          "source": "144741178",
          "target": "1301361737334231040",
          "value": 1
      },
      {
          "source": "1297963146007785472",
          "target": "1300987181507448832",
          "value": 1
      },
      {
          "source": "1273012654815301632",
          "target": "1301150569072152576",
          "value": 1
      },
      {
          "source": "223641204",
          "target": "1301350955796094976",
          "value": 1
      },
      {
          "source": "1298116917996085248",
          "target": "1301374414433345536",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1300405130194563072",
          "value": 1
      },
      {
          "source": "73010193",
          "target": "1301567414094757888",
          "value": 1
      },
      {
          "source": "6468102",
          "target": "1301385713167073280",
          "value": 1
      },
      {
          "source": "520386868",
          "target": "1300512750041432064",
          "value": 1
      }
  ]
};*/

@Component({
  selector: 'app-force-directed-svg',
  templateUrl: './force-directed-svg.component.html',
  styleUrls: ['./force-directed-svg.component.css']
})
export class ForceDirectedSvgComponent implements OnInit {

  @Input() data: Graph;
  @Output() clickRequest = new EventEmitter<Node>();

  ngOnInit() {
    console.log('D3.js version:', d3['version']);


    const clickReq: EventEmitter<Node> = this.clickRequest;

    const svg = d3.select('#directed');
    const width = +svg.attr('width');
    const height = +svg.attr('height');

    const color = d3.scaleOrdinal(d3.schemeDark2);

    const nodes: Node[] = [];
    const links: Link[] = [];


    this.data.nodes.forEach((d) => {
      nodes.push(<Node>d);
    });

    this.data.links.forEach((d) => {
      links.push(<Link>d);
    });

    const simulation = d3.forceSimulation()
      .force('link', d3.forceLink().id((d: any) => d.id))
      .force('charge', d3.forceManyBody())
      .force('center', d3.forceCenter(width / 2, height / 2))
      .force("x", d3.forceX())
      .force("y", d3.forceY());

    const graph: Graph = <Graph>{ nodes, links };

    const link = svg.append('g')
      .attr('class', 'linksForce')
      .selectAll('line')
      .data(graph.links)
      .enter()
      .append('line')
      .attr('stroke', "#999")
      .attr('stroke-opacity', 0.6)
      .attr('stroke-width', (d: any) => Math.sqrt(d.value));

    const node = svg.append('g')
      .attr('class', 'nodesForce')
      .selectAll('circle')
      .data(graph.nodes)
      .enter()
      .append('circle')
      .attr('r', (d: Node) => 5)
      .attr('stroke', "#fff")
      .attr('stroke-width', "1.5px")
      .attr('cursor', "pointer")
      .attr('fill', (d: any) => color(d.group));


    svg.selectAll('circle').call(d3.drag()
      .on('start', dragstarted)
      .on('drag', dragged)
      .on('end', dragended)
    );

    svg.selectAll('circle').on("click", clickNode);


    node.append('title')
      .text((d) => d.id);

    simulation
      .nodes(graph.nodes)
      .on('tick', ticked);

    simulation.force<d3.ForceLink<any, any>>('link')
      .links(graph.links);

    function ticked() {
      link
        .attr('x1', function (d: any) { return d.source.x; })
        .attr('y1', function (d: any) { return d.source.y; })
        .attr('x2', function (d: any) { return d.target.x; })
        .attr('y2', function (d: any) { return d.target.y; });

      node
        .attr('cx', function (d: any) { return d.x; })
        .attr('cy', function (d: any) { return d.y; });
    }


    function dragstarted(event, d) {
      //if (!d3.event.active) { simulation.alphaTarget(0.3).restart(); }
      if (!event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }

    function dragged(event, d) {
      d.fx = event.x;//d3.event.x;
      d.fy = event.y;//d3.event.y;
    }

    function dragended(event, d) {
      //if (!d3.event.active) { simulation.alphaTarget(0); }
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    function clickNode(event, selected) {
      console.log("clickNode");
      svg.selectAll('circle').attr('fill', (d: any) =>
        (d.id != selected.id) ? color(d.group) : "#FFFFF"
      );
      clickReq.emit(selected);
    }
  }

}
